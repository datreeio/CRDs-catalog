{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "type": "object",
  "description": "KongIngress is the Schema for the kongingresses API.\nDeprecated: Use annotations and KongUpstreamPolicy instead. See https://developer.konghq.com/kubernetes-ingress-controller/migrate/kongingress/",
  "properties": {
    "apiVersion": {
      "type": "string",
      "description": "APIVersion defines the versioned schema of this representation of an object.\nServers should convert recognized schemas to the latest internal value, and\nmay reject unrecognized values.\nMore info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources"
    },
    "kind": {
      "type": "string",
      "description": "Kind is a string value representing the REST resource this object represents.\nServers may infer this from the endpoint the client submits requests to.\nCannot be updated.\nIn CamelCase.\nMore info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds"
    },
    "metadata": {
      "type": "object"
    },
    "proxy": {
      "type": "object",
      "description": "Proxy defines additional connection options for the routes to be configured in the\nKong Gateway, e.g. `connection_timeout`, `retries`, etc.",
      "properties": {
        "connect_timeout": {
          "type": "integer",
          "description": "The timeout in milliseconds for\testablishing a connection to the upstream server.\nDeprecated: use Service's \"konghq.com/connect-timeout\" annotation instead.",
          "minimum": 0
        },
        "path": {
          "type": "string",
          "description": "(optional) The path to be used in requests to the upstream server.\nDeprecated: use Service's \"konghq.com/path\" annotation instead.",
          "pattern": "^/.*$"
        },
        "protocol": {
          "type": "string",
          "description": "The protocol used to communicate with the upstream.\nDeprecated: use Service's \"konghq.com/protocol\" annotation instead.",
          "enum": [
            "http",
            "https",
            "grpc",
            "grpcs",
            "tcp",
            "tls",
            "udp"
          ]
        },
        "read_timeout": {
          "type": "integer",
          "description": "The timeout in milliseconds between two successive read operations\nfor transmitting a request to the upstream server.\nDeprecated: use Service's \"konghq.com/read-timeout\" annotation instead.",
          "minimum": 0
        },
        "retries": {
          "type": "integer",
          "description": "The number of retries to execute upon failure to proxy.\nDeprecated: use Service's \"konghq.com/retries\" annotation instead.",
          "minimum": 0
        },
        "write_timeout": {
          "type": "integer",
          "description": "The timeout in milliseconds between two successive write operations\nfor transmitting a request to the upstream server.\nDeprecated: use Service's \"konghq.com/write-timeout\" annotation instead.",
          "minimum": 0
        }
      },
      "additionalProperties": false
    },
    "route": {
      "type": "object",
      "description": "Route define rules to match client requests.\nEach Route is associated with a Service,\nand a Service may have multiple Routes associated to it.",
      "properties": {
        "headers": {
          "type": "object",
          "description": "Headers contains one or more lists of values indexed by header name\nthat will cause this Route to match if present in the request.\nThe Host header cannot be used with this attribute.\nDeprecated: use Ingress' \"konghq.com/headers\" annotation instead.",
          "additionalProperties": {
            "type": "array",
            "items": {
              "type": "string"
            }
          }
        },
        "https_redirect_status_code": {
          "type": "integer",
          "description": "HTTPSRedirectStatusCode is the status code Kong responds with\nwhen all properties of a Route match except the protocol.\nDeprecated: use Ingress' \"ingress.kubernetes.io/force-ssl-redirect\" or\n\"konghq.com/https-redirect-status-code\" annotations instead."
        },
        "methods": {
          "type": "array",
          "description": "Methods is a list of HTTP methods that match this Route.\nDeprecated: use Ingress' \"konghq.com/methods\" annotation instead.",
          "items": {
            "type": "string"
          }
        },
        "path_handling": {
          "type": "string",
          "description": "PathHandling controls how the Service path, Route path and requested path\nare combined when sending a request to the upstream.\nDeprecated: use Ingress' \"konghq.com/path-handling\" annotation instead.",
          "enum": [
            "v0",
            "v1"
          ]
        },
        "preserve_host": {
          "type": "boolean",
          "description": "PreserveHost sets When matching a Route via one of the hosts domain names,\nuse the request Host header in the upstream request headers.\nIf set to false, the upstream Host header will be that of the Serviceâ€™s host.\nDeprecated: use Ingress' \"konghq.com/preserve-host\" annotation instead."
        },
        "protocols": {
          "type": "array",
          "description": "Protocols is an array of the protocols this Route should allow.\nDeprecated: use Ingress' \"konghq.com/protocols\" annotation instead.",
          "items": {
            "type": "string",
            "description": "KongProtocol is a valid Kong protocol.\nThis alias is necessary to deal with https://github.com/kubernetes-sigs/controller-tools/issues/342",
            "enum": [
              "http",
              "https",
              "grpc",
              "grpcs",
              "tcp",
              "tls",
              "udp"
            ]
          }
        },
        "regex_priority": {
          "type": "integer",
          "description": "RegexPriority is a number used to choose which route resolves a given request\nwhen several routes match it using regexes simultaneously.\nDeprecated: use Ingress' \"konghq.com/regex-priority\" annotation instead."
        },
        "request_buffering": {
          "type": "boolean",
          "description": "RequestBuffering sets whether to enable request body buffering or not.\nDeprecated: use Ingress' \"konghq.com/request-buffering\" annotation instead."
        },
        "response_buffering": {
          "type": "boolean",
          "description": "ResponseBuffering sets whether to enable response body buffering or not.\nDeprecated: use Ingress' \"konghq.com/response-buffering\" annotation instead."
        },
        "snis": {
          "type": "array",
          "description": "SNIs is a list of SNIs that match this Route when using stream routing.\nDeprecated: use Ingress' \"konghq.com/snis\" annotation instead.",
          "items": {
            "type": "string"
          }
        },
        "strip_path": {
          "type": "boolean",
          "description": "StripPath sets When matching a Route via one of the paths\nstrip the matching prefix from the upstream request URL.\nDeprecated: use Ingress' \"konghq.com/strip-path\" annotation instead."
        }
      },
      "additionalProperties": false
    },
    "upstream": {
      "type": "object",
      "description": "Upstream represents a virtual hostname and can be used to loadbalance\nincoming requests over multiple targets (e.g. Kubernetes `Services` can\nbe a target, OR `Endpoints` can be targets).",
      "properties": {
        "algorithm": {
          "type": "string",
          "description": "Algorithm is the load balancing algorithm to use.\nAccepted values are: \"round-robin\", \"consistent-hashing\", \"least-connections\", \"latency\".",
          "enum": [
            "round-robin",
            "consistent-hashing",
            "least-connections",
            "latency"
          ]
        },
        "hash_fallback": {
          "type": "string",
          "description": "HashFallback defines What to use as hashing input\nif the primary hash_on does not return a hash.\nAccepted values are: \"none\", \"consumer\", \"ip\", \"header\", \"cookie\"."
        },
        "hash_fallback_header": {
          "type": "string",
          "description": "HashFallbackHeader is the header name to take the value from as hash input.\nOnly required when \"hash_fallback\" is set to \"header\"."
        },
        "hash_fallback_query_arg": {
          "type": "string",
          "description": "HashFallbackQueryArg is the \"hash_fallback\" version of HashOnQueryArg."
        },
        "hash_fallback_uri_capture": {
          "type": "string",
          "description": "HashFallbackURICapture is the \"hash_fallback\" version of HashOnURICapture."
        },
        "hash_on": {
          "type": "string",
          "description": "HashOn defines what to use as hashing input.\nAccepted values are: \"none\", \"consumer\", \"ip\", \"header\", \"cookie\", \"path\", \"query_arg\", \"uri_capture\"."
        },
        "hash_on_cookie": {
          "type": "string",
          "description": "The cookie name to take the value from as hash input.\nOnly required when \"hash_on\" or \"hash_fallback\" is set to \"cookie\"."
        },
        "hash_on_cookie_path": {
          "type": "string",
          "description": "The cookie path to set in the response headers.\nOnly required when \"hash_on\" or \"hash_fallback\" is set to \"cookie\"."
        },
        "hash_on_header": {
          "type": "string",
          "description": "HashOnHeader defines the header name to take the value from as hash input.\nOnly required when \"hash_on\" is set to \"header\"."
        },
        "hash_on_query_arg": {
          "type": "string",
          "description": "HashOnQueryArg is the query string parameter whose value is the hash input when \"hash_on\" is set to \"query_arg\"."
        },
        "hash_on_uri_capture": {
          "type": "string",
          "description": "HashOnURICapture is the name of the capture group whose value is the hash input when \"hash_on\" is set to\n\"uri_capture\"."
        },
        "healthchecks": {
          "type": "object",
          "description": "Healthchecks defines the health check configurations in Kong.",
          "properties": {
            "active": {
              "type": "object",
              "description": "ActiveHealthcheck configures active health check probing.",
              "properties": {
                "concurrency": {
                  "type": "integer",
                  "minimum": 1
                },
                "headers": {
                  "type": "object",
                  "additionalProperties": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    }
                  }
                },
                "healthy": {
                  "type": "object",
                  "description": "Healthy configures thresholds and HTTP status codes\nto mark targets healthy for an upstream.",
                  "properties": {
                    "http_statuses": {
                      "type": "array",
                      "items": {
                        "type": "integer"
                      }
                    },
                    "interval": {
                      "type": "integer",
                      "minimum": 0
                    },
                    "successes": {
                      "type": "integer",
                      "minimum": 0
                    }
                  },
                  "additionalProperties": false
                },
                "http_path": {
                  "type": "string",
                  "pattern": "^/.*$"
                },
                "https_sni": {
                  "type": "string"
                },
                "https_verify_certificate": {
                  "type": "boolean"
                },
                "timeout": {
                  "type": "integer",
                  "minimum": 0
                },
                "type": {
                  "type": "string"
                },
                "unhealthy": {
                  "type": "object",
                  "description": "Unhealthy configures thresholds and HTTP status codes\nto mark targets unhealthy.",
                  "properties": {
                    "http_failures": {
                      "type": "integer",
                      "minimum": 0
                    },
                    "http_statuses": {
                      "type": "array",
                      "items": {
                        "type": "integer"
                      }
                    },
                    "interval": {
                      "type": "integer",
                      "minimum": 0
                    },
                    "tcp_failures": {
                      "type": "integer",
                      "minimum": 0
                    },
                    "timeouts": {
                      "type": "integer",
                      "minimum": 0
                    }
                  },
                  "additionalProperties": false
                }
              },
              "additionalProperties": false
            },
            "passive": {
              "type": "object",
              "description": "PassiveHealthcheck configures passive checks around\npassive health checks.",
              "properties": {
                "healthy": {
                  "type": "object",
                  "description": "Healthy configures thresholds and HTTP status codes\nto mark targets healthy for an upstream.",
                  "properties": {
                    "http_statuses": {
                      "type": "array",
                      "items": {
                        "type": "integer"
                      }
                    },
                    "interval": {
                      "type": "integer",
                      "minimum": 0
                    },
                    "successes": {
                      "type": "integer",
                      "minimum": 0
                    }
                  },
                  "additionalProperties": false
                },
                "type": {
                  "type": "string"
                },
                "unhealthy": {
                  "type": "object",
                  "description": "Unhealthy configures thresholds and HTTP status codes\nto mark targets unhealthy.",
                  "properties": {
                    "http_failures": {
                      "type": "integer",
                      "minimum": 0
                    },
                    "http_statuses": {
                      "type": "array",
                      "items": {
                        "type": "integer"
                      }
                    },
                    "interval": {
                      "type": "integer",
                      "minimum": 0
                    },
                    "tcp_failures": {
                      "type": "integer",
                      "minimum": 0
                    },
                    "timeouts": {
                      "type": "integer",
                      "minimum": 0
                    }
                  },
                  "additionalProperties": false
                }
              },
              "additionalProperties": false
            },
            "threshold": {
              "type": "number"
            }
          },
          "additionalProperties": false
        },
        "host_header": {
          "type": "string",
          "description": "HostHeader is The hostname to be used as Host header\nwhen proxying requests through Kong."
        },
        "slots": {
          "type": "integer",
          "description": "Slots is the number of slots in the load balancer algorithm.",
          "minimum": 10
        }
      },
      "additionalProperties": false
    }
  },
  "additionalProperties": false
}